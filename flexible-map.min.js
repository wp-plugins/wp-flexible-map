/*!
JavaScript for the WordPress plugin wp-flexible-map
Â© 2011 WebAware Pty Ltd, released under LGPL v2.1
*/
function FlexibleMap(){this.mapTypeId=google.maps.MapTypeId.ROADMAP;this.mapTypeControl=false;this.scaleControl=false;this.streetViewControl=false;this.scrollwheel=false;this.zoom=16;this.markerTitle="";this.markerDescription="";this.markerLink="";this.markerShowInfo=true;this.markerDirections=false;this.navigationControlOptions={style:google.maps.NavigationControlStyle.SMALL};this.dirService=false;this.dirPanel=false;this.region=false}FlexibleMap.prototype={constructor:FlexibleMap,showKML:function(a,e,b){var d=this.showMap(a,[0,0]),c=new google.maps.KmlLayer(e);c.setMap(d);if(typeof b!="undefined"){google.maps.event.addListenerOnce(d,"tilesloaded",function(){d.setZoom(b)})}google.maps.event.addListener(c,"click",function(f){f.featureData.description=f.featureData.description.replace(/ target="_blank"/ig,"")})},showMarker:function(e,d,j){var c=this.showMap(e,d),m=new google.maps.Marker({map:c,position:new google.maps.LatLng(j[0],j[1])});if(this.markerTitle){var h,k,o,f,g,l,n=this,b=document.createElement("DIV");b.style.fontFamily="Arial,Helvetica,sans-serif";g=document.createElement("DIV");g.style.fontWeight="bold";g.style.fontSize="medium";g.appendChild(document.createTextNode(this.markerTitle));b.appendChild(g);if(this.markerDescription||this.markerLink){g=document.createElement("DIV");g.style.fontSize="small";if(this.markerDescription){o=this.markerDescription.split("\n");for(h=0,k=o.length;h<k;h++){if(h>0){g.appendChild(document.createElement("BR"))}g.appendChild(document.createTextNode(o[h]))}if(this.markerLink){g.appendChild(document.createElement("BR"))}}if(this.markerLink){l=document.createElement("A");l.href=this.markerLink;l.appendChild(document.createTextNode("Click for details"));g.appendChild(l)}b.appendChild(g)}if(this.markerDirections){g=document.createElement("DIV");g.style.fontSize="small";l=document.createElement("A");l.href=" ";l.dataLatitude=j[0];l.dataLongitude=j[1];l.dataTitle=this.markerTitle;l.onclick=function(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}n.showDirections(this.dataLatitude,this.dataLongitude,this.dataTitle)};l.appendChild(document.createTextNode("Directions"));g.appendChild(l);b.appendChild(g);if(!this.dirService){this.dirService=new google.maps.DirectionsService()}if(!this.dirPanel){this.dirPanel=new google.maps.DirectionsRenderer({map:c,panel:document.getElementById(this.markerDirections)})}}f=new google.maps.InfoWindow({content:b});if(this.markerShowInfo){f.open(c,m)}google.maps.event.addListener(m,"click",function(){f.open(c,m)})}},showMap:function(a,b){return new google.maps.Map(document.getElementById(a),{mapTypeId:this.mapTypeId,mapTypeControl:this.mapTypeControl,scaleControl:this.scaleControl,scrollwheel:this.scrollwheel,streetViewControl:this.streetViewControl,navigationControlOptions:this.navigationControlOptions,center:new google.maps.LatLng(b[0],b[1]),zoom:this.zoom})},showDirections:function(e,a,g){var b=document.getElementById(this.markerDirections),d=document.createElement("form"),i=this,f=this.region||"",h,c;while(c=b.lastChild){b.removeChild(c)}c=document.createElement("p");c.appendChild(document.createTextNode("From: "));h=document.createElement("input");h.type="text";h.name="from";c.appendChild(h);h=document.createElement("input");h.type="submit";h.value="Get directions";c.appendChild(h);d.appendChild(c);b.appendChild(d);d.elements.from.focus();d.onsubmit=function(k){if(k.preventDefault){k.preventDefault()}else{k.returnValue=false}var l=this.elements.from.value;if(/\S/.test(l)){var j={origin:l,region:f,destination:new google.maps.LatLng(e,a),travelMode:google.maps.DirectionsTravelMode.DRIVING};i.dirService.route(j,function(o,m){var n=google.maps.DirectionsStatus;switch(m){case n.OK:i.dirPanel.setDirections(o);break;case n.ZERO_RESULTS:alert("No route could be found between the origin and destination.");break;case n.OVER_QUERY_LIMIT:alert("The webpage has gone over the requests limit in too short a period of time.");break;case n.REQUEST_DENIED:alert("The webpage is not allowed to use the directions service.");break;case n.INVALID_REQUEST:alert("Invalid directions request.");break;case n.NOT_FOUND:alert("Origin or destination was not found.");break;default:alert("A directions request could not be processed due to a server error. The request may succeed if you try again.");break}})}}}};